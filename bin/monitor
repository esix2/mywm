#! /bin/sh

WM="$(neofetch | grep -i WM | cut -f2 -d' ')"
maindisp="eDP-1"

if [[ $WM =~ "sway" ]]; then
    seconddisp="$(get-second-monitor sway)"
else
    seconddisp="$(get-second-monitor i3)"
fi

if [[ "$WM" =~ "sway" ]] ; then
    sway output $maindisp toggle > /dev/null 2>&1
    sway output $seconddisp enable > /dev/null 2>&1
elif [[  "$WM" =~ "i3" || "$WM" =~ "KWin" ]] ; then
    if [ ! -z "$seconddisp" ]; then
        xrandr --output $maindisp --off 2>/dev/null
    else 
        xrandr --output $maindisp --auto
    fi
    xrandr --output $seconddisp --auto 2>/dev/null
else
    echo "$WM is not a known window manager to me. Sorry!"
fi

if [ "$WM" == "sway" ] ; then
#         echo "HERE"
    if [ -z $(pidof waybar) ]; then
        exec waybar & > /dev/null 2>&1
    fi
fi
