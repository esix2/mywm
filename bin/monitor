#! /bin/sh

# WM="$(neofetch | grep -i WM | cut -f2 -d' ')"
maindisp="eDP-1"
seconddisp="$(get-second-monitor)"


if [[ "$XDG_SESSION_TYPE" == "wayland" ]] ; then
    sway output $maindisp toggle > /dev/null 2>&1
    sway output $seconddisp enable > /dev/null 2>&1
elif [  "$XDG_SESSION_TYPE" == "tty" ] ; then
    if [ ! -z "$seconddisp" ]; then
        xrandr --output $maindisp --off 2>/dev/null
    else 
        xrandr --output $maindisp --auto
    fi
    xrandr --output $seconddisp --auto 2>/dev/null
else
    echo "$XDG_SESSION_TYPE is not a known window manager to me. Sorry!"
fi

if [ "$XDG_SESSION_TYPE" == "wayland" ] ; then
    if [ -z $(pidof waybar) ]; then
        exec waybar & > /dev/null 2>&1
    fi
fi
